<odoo>

    <!-- action to open res.partner on Managed Properties Button-->
    <record model="ir.actions.act_window" id="action_aln_res_partner">
        <field name="domain">['|', ('prop_mgmt_id','=', active_id),('prop_mgr_id', '=', active_id)]</field>
        <field name="name">Property Management Company</field>
        <field name="res_model">res.partner</field>
        <field name="view_mode">tree,form</field>
        <field name="view_type">form</field>
    </record>

    <!-- Inherited Partner form view-->
    <record id="res_partner_view_form_extened" model="ir.ui.view">
        <field name="name">Partner</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='vat']" position="after">
                <field name="num_unit"/>
                <field name="prop_mgmt_id"/>
                <field name="prop_mgr_id"/>
                <field name="parent_id_txt" invisible="1"/>
                <field name="associated_id_txt" invisible="1"/>
                <field name="prop_mgmt_id_txt"/>
                <field name="prop_mgr_id_txt" invisible="1"/>
                <field name="mgmt_comp_id_txt" invisible="1"/>
                <field name="partner_type"/>
            </xpath>
        </field>
    </record>

    <!-- Partner Managed Property button -->
    <record id="view_partners_form_btn_add" model="ir.ui.view">
            <field name="name">view.res.partner.form.btn.add</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="crm.view_partners_form_crm1"/>
            <field name="arch" type="xml">
                <data>
                    <button name="%(crm.crm_lead_opportunities)d" position="before">
                        <button class="oe_stat_button"
                            name="%(action_aln_res_partner)d" type="action"
                            icon="fa-building-o">
                            <field string="Managed Properties" name="property_count" widget="statinfo"/>
                        </button>
                    </button>
                </data>
            </field>
        </record>

    <!-- Inherited Partner tree view-->
    <record id="res_partner_view_tree_extened" model="ir.ui.view">
        <field name="name">Partner</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='email']" position="after">
                <field name="num_unit"/>
            </xpath>
        </field>
    </record>

</odoo>
